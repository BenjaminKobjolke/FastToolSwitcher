# Create New Release

## 1. Get Current Version

The version is stored in `version.txt` in the project root (format: `X.Y.Z`).

```bash
tools\get_version.bat
```

## 2. Increment Version

Increments the patch number (e.g., 1.0.0 -> 1.0.1):

```bash
tools\increment_version.bat
```

To decrement (e.g., if incremented by mistake):

```bash
tools\decrement_version.bat
```

## 3. Create Release Notes

### Directory Structure

Release notes are stored in `release_notes/` with one subfolder per version:

```
release_notes/
  1.0.0/
    en.json
    de.json
    ...
  1.0.1/
    en.json
    de.json
    ...
```

### Create the en.json File

Create a new folder matching the version number, then create `en.json` inside it.

**Only create `en.json` manually.** Other languages are generated by the translation tool (see step 4).

#### Schema for en.json

```json
{
    "version": "1.0.1",
    "date": "2026-02-10",
    "notes": [
        "Improved: description of improvement",
        "Fixed: description of fix",
        "New: description of new feature"
    ]
}
```

| Key | Description |
|-----|-------------|
| `version` | Version string matching the folder name |
| `date` | Release date in `YYYY-MM-DD` format |
| `notes` | Array of strings describing changes. Prefix each with `Improved:`, `Fixed:`, or `New:` |

## 4. Translate Release Notes

**IMPORTANT: This step must not be skipped.** After creating `en.json`, run the translation tool to generate all other language files:

```bash
tools\translator_release_notes.bat
```

This uses the GPT-json-translator tool at `D:\GIT\BenjaminKobjolke\GPT-json-translator` to translate `en.json` into all supported languages recursively.

Verify that the version folder now contains multiple `.json` files (ar.json, bg.json, de.json, etc.) before proceeding.

## 5. Build the Release

Build the exe using the AutoHotkey compiler:

```bash
tools\build.bat
```

This compiles `FastToolSwitcher.ahk` into `FastToolSwitcher.exe` using `C:\Program Files\AutoHotkey\Compiler\Ahk2Exe.exe` with the light icon.

## 6. Publish the Release

Upload the exe and release notes to FTP:

```bash
tools\publish_release.bat
```

This uses the release-tool at `D:\GIT\BenjaminKobjolke\release-tool` to:
1. Sign the exe via the network signing service
2. Upload the exe to FTP
3. Back up the previous version
4. Upload new release note folders

**Note:** Update the `--previous-version` argument in `publish_release.bat` to match the version being replaced before running.

## 7. Git Commit

After the release is published, commit with a RELEASE message:

```
RELEASE (app): X.Y.Z
```

---

## Planned Features (Not Yet Implemented)

### Package Release Notes with the Application

Currently release notes exist only as files on disk and on the FTP server. They should be embedded into the compiled exe so the application is self-contained.

**Implementation plan:**
- Add an `Ahk2Exe` resource directive in `FastToolSwitcher.ahk` to embed the `release_notes/` folder (or at minimum the current version's `en.json`) as a resource
- Alternatively, since AHK `FileInstall` can bundle files: use `FileInstall` to extract release notes to a temp directory on first run
- The build script (`build.bat`) would need to be updated to copy release notes into a location the compiler can reference

### View Release Notes from Within the Application

Currently there is no way to view release notes inside the app.

**Implementation plan:**
- Add a "Release Notes" or "What's New" menu item to the system tray menu
- Create a new GUI window (similar to SettingsGUI) that reads the current version's release notes JSON and displays the notes in a formatted list
- Read version from `version.txt` (or embed it at compile time) to determine which release notes to show
- If release notes are bundled with the exe, extract and parse them; otherwise fall back to reading from the `release_notes/` directory
